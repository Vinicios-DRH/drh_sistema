{% extends "base.html" %}
{% block body %}
<section class="container py-4">
  <h1 class="h5 mb-3">Validar PAF #{{ paf.id }} — Ano {{ paf.ano_referencia }}</h1>

  <div class="mb-3">
    <div>Opções do militar: <strong>{{ paf.opcao_1 }}, {{ paf.opcao_2 }}, {{ paf.opcao_3 }}</strong></div>
    <div>Status atual: <span class="badge bg-info text-dark">{{ paf.status }}</span></div>
    <div>Mês definido: <strong>{{ paf.mes_definido or '—' }}</strong></div>
  </div>

  <form method="post" class="d-flex gap-2 mb-4">
    <input type="hidden" name="acao" value="auto"/>
    <button class="btn btn-primary" type="submit">Alocar automaticamente</button>
  </form>

  <h2 class="h6">Alocação manual</h2>
  <form method="post" class="row g-3">
    <input type="hidden" name="acao" value="manual"/>
    <div class="col-12 col-md-4">
      <label class="form-label">Mês</label>
      <select class="form-select" name="mes_definido" required>
        <option value="">Selecione...</option>
        {% for m in range(1,13) %}
        {% set cap, ocup, disp = caps[m] %}
        <option value="{{m}}">{{ m }} — limite {{ cap }}, usados {{ ocup }}, disp {{ disp }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-12">
      <button class="btn btn-success">Confirmar alocação</button>
    </div>
  </form>
</section>
{% endblock %}
