{% extends 'base.html' %}

{% block head %}
<style>
  :root{
    --overlay-alpha:.18;
    --card-alpha:.28;
    --border-alpha:.14;
    --glass-blur:8px;
    --brand-red:#B5121B;
    --brand-red-600:#9e1119;
  }
  .hero-bg{
    min-height:100vh; background-repeat:no-repeat; background-position:center; background-size:cover; background-color:#0b0e14;
    background-image:image-set(
      url("{{ url_for('static', filename='img/bombeiros_5_1280.webp') }}") 1x,
      url("{{ url_for('static', filename='img/bombeiros_5_1920.webp') }}") 2x
    ); position:relative;
  }
  .hero-bg::before{ content:""; position:absolute; inset:0; background:rgba(0,0,0,var(--overlay-alpha)); pointer-events:none; }
  @media(max-width:768px){ .hero-bg{ background-image:image-set(url("{{ url_for('static', filename='img/bombeiros_5_768.webp') }}") 1x); } }

  .transparent-card{ background:rgba(15,15,20,var(--card-alpha)); backdrop-filter:blur(var(--glass-blur)); -webkit-backdrop-filter:blur(var(--glass-blur));
    border:1px solid rgba(255,255,255,var(--border-alpha)); box-shadow:0 10px 40px rgba(0,0,0,.45); color:#e6edf3; }
  .transparent-card h2, .transparent-card p{ color:#f1f5f9; }

  /* Check animado */
  .checkwrap{ width:120px; height:120px; border-radius:50%; margin:0 auto 1rem; position:relative; box-shadow:inset 0 0 0 6px rgba(255,255,255,.14); }
  .check{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%) rotate(45deg); width:52px; height:26px; border-right:8px solid #22c55e; border-bottom:8px solid #22c55e; opacity:0; animation:pop .7s .35s ease forwards; }
  @keyframes pop{ 0%{ transform:translate(-50%,-50%) rotate(45deg) scale(.6); opacity:0; } 100%{ transform:translate(-50%,-50%) rotate(45deg) scale(1); opacity:1; } }

  .btn-primary{ background:var(--brand-red); border-color:var(--brand-red); }
  .btn-primary:hover{ background:var(--brand-red-600); border-color:var(--brand-red-600); }
  .btn-outline-light:hover{ color:#0b1020; background:#fff; }

  /* Confete simples */
  .confetti{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:1050; }
  .confetti i{ position:absolute; width:10px; height:16px; opacity:.9; animation:fall linear forwards; }
  @keyframes fall{ to{ transform:translateY(110vh) rotate(360deg); opacity:1; } }
</style>
{% endblock %}

{% block body %}
<section class="py-4 hero-bg">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-9 col-lg-7 col-xl-6">
        <div class="card rounded-3 transparent-card">
          <div class="card-body p-4 p-xl-5 text-center">
            <div class="checkwrap"><div class="check"></div></div>
            <h2 class="fw-bold mb-2">Missão concluída!</h2>
            <p class="lead mb-1">Você finalizou todas as atualizações que estavam atribuídas.</p>
            <p class="mb-4" style="opacity:.85;">Obrigado pelo apoio na força-tarefa. Caso novas pendências sejam distribuídas, este acesso será reaberto automaticamente.</p>

            <div class="d-grid gap-2 d-sm-flex justify-content-sm-center mt-2">
              <a href="{{ url_for('home_cadete') }}" class="btn btn-primary"><i class="bi bi-list-check me-1"></i> Ver painel do cadete</a>
              <a href="{{ url_for('sair') }}" class="btn btn-outline-light"><i class="bi bi-box-arrow-right me-1"></i> Sair</a>
            </div>
          </div>
        </div>
        <div class="text-center mt-3">
          <a class="btn btn-sm btn-outline-light" href="{{ url_for('home_cadete') }}"><i class="bi bi-house-door me-1"></i> Início</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Confete decorativo -->
  <div id="confetti" class="confetti" aria-hidden="true"></div>
</section>

<script>
(function(){
  const area = document.getElementById('confetti');
  if(!area) return;
  const colors = ['#fde047','#60a5fa','#34d399','#f472b6','#f87171','#c084fc','#22d3ee'];
  const n = 80; // quantidade moderada
  const w = window.innerWidth;
  for(let i=0;i<n;i++){
    const el = document.createElement('i');
    const size = 8 + Math.random()*8;
    const left = Math.random()*w;
    const dur = 3 + Math.random()*2.5;
    const delay = Math.random()*0.8;
    el.style.left = left + 'px';
    el.style.background = colors[Math.floor(Math.random()*colors.length)];
    el.style.width = size + 'px';
    el.style.height = (size*1.4) + 'px';
    el.style.transform = 'translateY(-20vh)';
    el.style.animationDuration = dur + 's';
    el.style.animationDelay = delay + 's';
    area.appendChild(el);
  }
  // limpeza após 7s
  setTimeout(()=> area.remove(), 7000);
})();
</script>
{% endblock %}