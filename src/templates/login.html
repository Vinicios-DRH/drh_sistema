{% extends 'base.html' %}

{% block head %}
<style>
  :root {
    --overlay-alpha: .18;
    /* máscara escura */
    --card-alpha: .28;
    --border-alpha: .14;
    --glass-blur: 8px;
  }

  /* Hero como background responsivo */
  .hero-bg {
    min-height: 100vh;
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    background-color: #0b0e14;
    /* cor base enquanto carrega */

    /* Fallback opcional (caso mantenha um JPG/PNG) */
    /* background-image: url("{{ url_for('static', filename='img/bombeiros_5_1280.jpg') }}"); */

    /* Somente WebP (1x/2x) */
    background-image: image-set(url("{{ url_for('static', filename='img/bombeiros_5_1280.webp') }}") 1x,
      url("{{ url_for('static', filename='img/bombeiros_5_1920.webp') }}") 2x);
    position: relative;
    /* necessário pro ::before */
  }

  /* Overlay escuro por cima do background */
  .hero-bg::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, var(--overlay-alpha));
    pointer-events: none;
  }

  /* Mobile força a menor */
  @media (max-width: 768px) {
    .hero-bg {
      background-image: image-set(url("{{ url_for('static', filename='img/bombeiros_5_768.webp') }}") 1x);
    }
  }

  /* Card vidro escuro */
  .transparent-card {
    background: rgba(15, 15, 20, var(--card-alpha));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid rgba(255, 255, 255, var(--border-alpha));
    box-shadow: 0 10px 40px rgba(0, 0, 0, .45);
    color: #e6edf3;
  }

  .transparent-card h2,
  .transparent-card label {
    color: #f1f5f9;
  }

  .transparent-card .form-control,
  .transparent-card .form-select {
    background: rgba(255, 255, 255, .08);
    border-color: rgba(255, 255, 255, .14);
    color: #f8fafc;
  }

  .transparent-card .form-control::placeholder {
    color: rgba(255, 255, 255, .55);
  }

  .transparent-card .form-control:focus {
    background: rgba(255, 255, 255, .12);
    border-color: rgba(99, 102, 241, .85);
    box-shadow: 0 0 0 .25rem rgba(99, 102, 241, .25);
    color: #fff;
  }

  .transparent-card .form-check-input {
    background-color: rgba(255, 255, 255, .12);
    border-color: rgba(255, 255, 255, .25);
  }

  .transparent-card .form-check-input:checked {
    background-color: #6366f1;
    border-color: #6366f1;
  }

  .transparent-card .btn.btn-outline-primary {
    border-color: rgba(99, 102, 241, .85);
    color: #e2e8f0;
  }

  .transparent-card .btn.btn-outline-primary:hover {
    background: rgba(99, 102, 241, .85);
    color: #0b1020;
  }

  .transparent-card .footer-note{
    border-top: 1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.06);
    padding: .75rem 1rem;
    border-bottom-left-radius: .5rem;
    border-bottom-right-radius: .5rem;
  }
  .transparent-card .footer-note, 
  .transparent-card .footer-note a{
    color: #f8fafc;
  }
  .transparent-card .footer-note a{
    text-decoration: underline;
    font-weight: 600;
  }
  .transparent-card .footer-note a:hover{
    opacity: .9;
  }

</style>
{% endblock %}

{% block body %}
<section class="py-3 py-md-4 p-xl-5 hero-bg">
  <div class="container py-3 py-md-4 p-xl-5 mt-5">
    <div class="row justify-content-center">
      <div class="col-12 col-md-9 col-lg-7 col-xl-6 col-xxl-5">
        <div class="card border border-light-subtle rounded-3 transparent-card">
          <div class="card-body p-3 p-md-4 p-xl-5">
            <div class="text-center mb-3">
              <a href="#!">
                <img src="{{ url_for('static', filename='img/logobm.png') }}" width="100" height="100" alt="Logo">
              </a>
            </div>
            <h2 class="fs-4 fw-bold text-center mb-4">Acesso administrativo</h2>
            <form method="POST" id="loginForm">
              {{ form_login.csrf_token }}
              <div class="row gy-2 overflow-hidden">
                <div class="col-12">
                  <div class="form-floating mb-3">
                    <div class="form-group">
                      {{ form_login.cpf.label(class="form-control-label") }}
                      {% if form_login.cpf.errors %}
                      {{ form_login.cpf(class="form-control is-invalid") }}
                      <div class="invalid-feedback">
                        {% for erro in form_login.cpf.errors %}{{ erro }}{% endfor %}
                      </div>
                      {% else %}
                      {{ form_login.cpf(class="form-control") }}
                      {% endif %}
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating mb-3">
                    <div class="form-group">
                      {{ form_login.senha.label(class="form-control-label") }}
                      {% if form_login.senha.errors %}
                      {{ form_login.senha(class="form-control is-invalid") }}
                      <div class="invalid-feedback">
                        {% for erro in form_login.senha.errors %}{{ erro }}{% endfor %}
                      </div>
                      {% else %}
                      {{ form_login.senha(class="form-control") }}
                      {% endif %}
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="d-flex gap-2 justify-content-between">
                    <div class="form-group">
                      {{ form_login.lembrar_dados(class="form-check-input") }}
                      {{ form_login.lembrar_dados.label(class="form-check-label") }}
                    </div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="d-grid my-3">
                    {{ form_login.botao_submit_login(class="btn btn-outline-primary mt-2") }}
                  </div>
                </div>
                <div class="footer-note text-center mt-2">
                <a href="{{ url_for('login_atualizacao') }}" class="small fw-semibold text-decoration-underline">
                  Ir para a área do militar (atualizar dados)
                </a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}